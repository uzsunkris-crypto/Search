<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Homes Professional</title>
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.45);
            --box-size: 85px;
        }

        body {
            margin: 0; padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #eef2ff radial-gradient(at 0% 0%, hsla(240, 45%, 85%, 1) 0, transparent 50%), 
                        radial-gradient(at 100% 0%, hsla(260, 40%, 80%, 1) 0, transparent 50%);
            height: 100vh; width: 100vw;
            display: flex; flex-direction: column;
            overflow: hidden;
        }

        /* HEADER */
        #category-header { 
            height: 50px; display: none; align-items: center; justify-content: center;
            padding: 0 20px; text-align: center;
        }
        #category-header h2 { margin: 0; font-size: 15px; color: #1e293b; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px; }

        /* SCREEN 1: GRID */
        .main-content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 10px; box-sizing: border-box; }
        .grid-container {
            display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(7, 1fr);
            gap: 8px; width: 100%; height: 100%; max-width: 500px;
        }

        .service-box {
            position: relative; background: var(--glass); backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px); border: 1.2px solid var(--glass-border);
            border-radius: 10px; overflow: visible; display: flex; align-items: flex-end; 
            justify-content: center; padding-bottom: 6px; cursor: pointer;
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;
            z-index: 1;
        }
        .service-box img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; border-radius: 9px; }
        .service-box span {
            position: relative; z-index: 10; color: white; font-weight: 800; font-size: clamp(7px, 1.6vh, 9px);
            text-shadow: 0 2px 4px rgba(0,0,0,1); text-align: center; padding: 0 4px; line-height: 1.1; width: 100%;
            text-transform: uppercase; pointer-events: none;
        }

        /* SCREEN 2: A, B, C LAYOUT */
        #drilldown-screen { display: none; flex: 1; padding: 10px; gap: 10px; box-sizing: border-box; position: relative; }
        
        /* A: Company List */
        .company-list {
            flex: 2.2; display: grid; grid-template-columns: 1fr 1fr; grid-auto-rows: 95px;
            gap: 10px; overflow-y: auto; scrollbar-width: none;
        }
        .company-list::-webkit-scrollbar { display: none; }
        
        .company-card {
            background: var(--glass); backdrop-filter: blur(5px); border: 1.2px solid var(--glass-border);
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-size: 10px; font-weight: 800; text-align: center; color: #1e293b; padding: 5px;
        }

        /* B & C: Scroll Logic */
        .category-track { flex: 1; position: relative; display: flex; justify-content: center; }
        
        /* B: Fixed Space (The static box) */
        .fixed-b-space {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: var(--box-size); height: var(--box-size); border: 2.5px solid #4f46e5;
            border-radius: 15px; background: rgba(255,255,255,0.4); z-index: 0; pointer-events: none;
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.2);
        }

        /* C: The Scrollable List */
        .scroll-column-c {
            width: 100%; overflow-y: scroll; scrollbar-width: none;
            display: flex; flex-direction: column; align-items: center;
            scroll-snap-type: y mandatory; padding-top: calc(50vh - 150px); padding-bottom: calc(50vh - 150px);
        }
        .scroll-column-c::-webkit-scrollbar { display: none; }

        .sub-box-item {
            width: var(--box-size); height: var(--box-size); background: var(--glass);
            border: 1.2px solid var(--glass-border); border-radius: 12px; margin: 12px 0;
            flex-shrink: 0; display: flex; align-items: center; justify-content: center;
            text-align: center; font-size: 9px; font-weight: 800; color: #1e293b;
            opacity: 0.25; scroll-snap-align: center; transition: all 0.4s ease; text-transform: uppercase;
            z-index: 1;
        }
        /* When item enters the B space */
        .sub-box-item.in-b-position { opacity: 1; transform: scale(1.1); color: #000; background: transparent; border-color: transparent; }

        /* BOTTOM NAV */
        .bottom-nav { height: 100px; width: 100%; display: flex; justify-content: center; align-items: center; }
        .nav-inner {
            width: 90%; height: 60px; background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px); border-radius: 30px; padding: 0 12px;
            display: flex; align-items: center; gap: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .nav-btn-home {
            width: 46px; height: 46px; background: linear-gradient(135deg, #4f46e5, #3730a3);
            border-radius: 50%; display: flex; align-items: center; justify-content: center; border: none; cursor: pointer;
        }
        .search-area { flex: 1; display: flex; align-items: center; background: #f1f5f9; border-radius: 20px; padding: 0 12px; height: 40px; }
        .search-area input { width: 100%; background: transparent; border: none; outline: none; font-size: 14px; color: #334155; }
        .mic-icon { color: #64748b; margin-right: 8px; display: flex; }
        .nav-btn-folder { width: 42px; height: 42px; background: rgba(79, 70, 229, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: none; }

        /* ANIMATIONS */
        .blur-active .service-box:not(.featured) { opacity: 0.7; }
        .featured { z-index: 100 !important; transform: scale(1.6); border: 2px solid #fff; box-shadow: 0 15px 40px rgba(0,0,0,0.4); opacity: 1 !important; }
    </style>
</head>
<body>

    <div id="category-header"><h2 id="current-category-name">HOME & LIVING</h2></div>

    <div id="grid-screen" class="main-content">
        <div id="grid" class="grid-container"></div>
    </div>

    <div id="drilldown-screen">
        <div class="company-list" id="companyGrid"></div>
        <div class="category-track">
            <div class="fixed-b-space"></div> <div class="scroll-column-c" id="subSelector"></div> </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-inner">
            <button class="nav-btn-home" onclick="goHome()">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            </button>
            <div class="search-area">
                <input type="text" placeholder="Smart Homes Search...">
                <div class="mic-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                </div>
            </div>
            <button class="nav-btn-folder">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#4f46e5" stroke-width="2.5" stroke-linecap="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
            </button>
        </div>
    </div>

    <script>
        // FULL DATASET
        const subData = {
            "HOME & LIVING": ["Furniture & Furnishings", "Home Appliances", "Kitchen & Dining", "Home Cleaning Products", "Cleaning & Housekeeping Services", "Interior Design & Styling", "Home Décor & Accessories", "Smart Home & Automation", "Electrical Services", "Plumbing & Water Systems", "Home Security & Safety", "Home Maintenance & Repairs", "Outdoor & Garden Living", "Home Utilities & Energy", "Laundry & Clothing Care", "Home Comfort & Wellness", "Home Assistance & Domestic Staff", "Elderly & Assisted Living", "Temporary Living Solutions", "Moving & Home Relocation", "Home Consultancy & Inspection"],
            "FOOD & HOSPITALITY": ["Restaurants", "Bakeries", "Catering", "Drinks", "Bars", "Hotels", "Short-Stay", "Delivery", "Cloud Kitchens", "Vendors", "Grocery", "Traditional", "International", "Event Food", "Processing", "Equipment", "Staff", "Nutrition", "Experiences", "Safety", "Consulting"],
            "FASHION & BEAUTY": ["Clothing", "Footwear", "Bags", "Jewelry", "Cosmetics", "Hair", "Makeup", "Nails", "Tailoring", "Fashion Design", "Traditional", "Modest", "Sportswear", "Lingerie", "Tools", "Grooming", "Retail", "Modeling", "Events", "Sustainable", "Consulting"],
            "HEALTH & WELLNESS": ["Hospitals", "Doctors", "Nurses", "Pharmacies", "Medical Equipment", "Telemedicine", "Fitness Centers", "Personal Trainers", "Yoga", "Nutritionists", "Physical Therapy", "Mental Health", "Alternative", "Wellness Retreats", "Supplements", "Labs", "Emergency", "Home Health", "Preventive", "Education", "Management"],
            "EDUCATION & SKILLS": ["Schools", "Colleges", "Vocational", "Online", "Tutors", "Language", "Test Prep", "Workshops", "Arts", "STEM", "Certification", "Soft Skills", "Materials", "eBooks", "Software", "Mentorship", "Special Needs", "Research", "Career", "Workshops", "Consulting"],
            "TECHNOLOGY & DIGITAL": ["Software", "Web", "Mobile", "IT Support", "Cloud", "Cybersecurity", "Network", "AI", "Robotics", "Digital Marketing", "E-commerce", "Gaming", "Consultancy", "SaaS", "Digital Ed", "IoT", "Blockchain", "Content", "Data Analytics", "Hardware", "Training"],
            "BUSINESS SERVICES": ["Accounting", "HR", "Legal", "Management", "Marketing", "Business Dev", "Financial", "Customer Support", "Office", "Virtual Assist", "Event Mgmt", "Supply Chain", "Training", "Translation", "Market Analysis", "Branding", "IT Services", "Risk", "Freelance", "Insurance", "Relocation"],
            "TRANSPORT & DELIVERY": ["Ride-Hailing", "Car Rental", "Bus", "Freight", "Courier", "Food Delivery", "Personal Drivers", "Moving", "Bike Rental", "Marine", "Air", "Maintenance", "Car Wash", "Sales", "Roadside", "Fleet", "Apps", "Tracking", "Heavy Transport", "Info", "Compliance"],
            "CONSTRUCTION & ENG.": ["Civil", "Building", "Electrical", "Plumbing", "Architecture", "Project Mgmt", "Surveying", "Renovation", "HVAC", "Roofing", "Painting", "Flooring", "Masonry", "Heavy Machinery", "Safety", "Interior", "Exterior", "Materials", "Consultancy", "Demolition", "Smart Building"],
            "SHOPPING & RETAIL": ["Supermarkets", "Fashion", "Electronics", "Furniture", "Bookstores", "Jewelry", "Cosmetics", "Sports", "Toys", "Convenience", "Marketplaces", "Department", "Improvement", "Automotive", "Specialty", "Pet Supplies", "Secondhand", "Art", "Luxury", "Assist", "Analytics"],
            "AGRI & ENVIRONMENT": ["Crop", "Livestock", "Fisheries", "Forestry", "Organic", "Equipment", "Consultancy", "Processing", "Seeds", "Irrigation", "Pest Control", "Environmental", "Waste", "Renewable", "Beekeeping", "Dairy", "Farm-to-Table", "Soil", "Training", "Landscape", "AgriTech"],
            "MEDIA & CREATIVE": ["Graphic", "Photography", "Video", "Animation", "Content", "Music", "Podcasting", "Advertising", "UX/UI", "Art", "Fashion Photo", "Documentation", "Post-Production", "Illustration", "NFTs", "Consultancy", "Media Planning", "PR", "Rentals", "Schools", "Performance"],
            "EVENTS & ENTERTAIN.": ["Planning", "Rentals", "Entertainment", "Music", "DJs", "Venues", "Catering", "Decoration", "Audio Visual", "Photo", "Talent", "Marketing", "Recreational", "Festivals", "Conferences", "Workshops", "Ticketing", "Crowd", "Travel", "Tech", "Analytics"],
            "REAL ESTATE & PROP.": ["Res Sales", "Com Sales", "Land", "Rentals", "Agents", "Management", "Valuation", "Invest", "Legal", "Inspection", "Staging", "Vacation", "Housing", "Consultancy", "Mortgage", "Leasing", "Development", "Architectural", "Smart Bldgs", "Marketing", "Green"],
            "FINANCE & INSURANCE": ["Banks", "Loans", "Wealth", "Stock Market", "Insurance", "Accounting", "Tax", "Financial Planning", "Payment", "Digital Assets", "Education", "Retirement", "Risk", "Payroll", "Crowdfunding", "Estate", "Corporate", "Microfinance", "Fintech", "Credit", "Compliance"],
            "PUBLIC & COMMUNITY": ["Municipal", "Welfare", "Health", "Emergency", "Centers", "Public Transport", "Libraries", "Offices", "Legal", "Parks", "Civic", "Urban", "Safety", "Education", "Research", "Disaster", "Utilities", "Eco", "Consultancy", "Outreach", "NGO"],
            "SECURITY & SAFETY": ["Private", "Cyber", "Surveillance", "Alarms", "Personal", "Event", "Fire", "Equipment", "Emergency", "Risk", "Consultancy", "Access", "Investigation", "Drone", "Physical", "Training", "Software", "Patrol", "Agencies", "Response", "Crisis"],
            "PERSONAL/FREELANCE": ["Assistants", "Tutoring", "Beauty", "Training", "Handyman", "Cleaning", "Pet Care", "Writing", "Digital Design", "Photography", "Music", "Counseling", "Hosting", "Delivery", "Chef", "Childcare", "Elder Care", "Virtual", "Tech Support", "Crafts", "Translation"],
            "AUTOMOTIVE/IND.": ["Sales", "Rentals", "Repair", "Wash", "Spare Parts", "Machinery", "Maintenance", "Heavy Transport", "Consultancy", "Fuel", "EV Charging", "Certification", "Driving Schools", "Customization", "Safety", "Rental", "Fleet", "Industrial Auto", "Operators", "Warehousing", "Recycling"],
            "SCIENCE & INNOV.": ["Scientific", "Biotech", "Renewable", "Space", "Robotics", "AI", "Physics", "Chemistry", "Environmental", "Agri Innovation", "Nano", "Pharma", "Smart Cities", "Grants", "Hubs", "Consultancy", "Patents", "STEM", "Data", "Prototype", "Trend"],
            "TALENT & EXPERTISE ⭐": ["Executive", "Consultancy", "Skilled Trades", "Creative", "Academic", "Influencers", "Sports", "Technical", "Legal", "Health", "Trainers", "Performers", "Mentors", "Startups", "Speakers", "Freelance", "Project Mgmt", "Analysts", "Event Specialists", "Translation", "Problem Solvers"]
        };

        const mainCats = [
            { name: "HOME & LIVING", img: "https://images.unsplash.com/photo-1513694203232-719a280e022f?w=400" },
            { name: "FOOD & HOSPITALITY", img: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=400" },
            { name: "FASHION & BEAUTY", img: "https://images.unsplash.com/photo-1483985988355-763728e1935b?w=400" },
            { name: "HEALTH & WELLNESS", img: "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=400" },
            { name: "EDUCATION & SKILLS", img: "https://images.unsplash.com/photo-1524178232363-1fb2b075b655?w=400" },
            { name: "TECHNOLOGY & DIGITAL", img: "https://images.unsplash.com/photo-1518770660439-4636190af475?w=400" },
            { name: "BUSINESS SERVICES", img: "https://images.unsplash.com/photo-1454165833767-02654a555971?w=400" },
            { name: "TRANSPORT & DELIVERY", img: "https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=400" },
            { name: "CONSTRUCTION & ENG.", img: "https://images.unsplash.com/photo-1504307651254-35680f3366d4?w=400" },
            { name: "SHOPPING & RETAIL", img: "https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400" },
            { name: "AGRI & ENVIRONMENT", img: "https://images.unsplash.com/photo-1500651230702-0e2d8a49d4ad?w=400" },
            { name: "MEDIA & CREATIVE", img: "https://images.unsplash.com/photo-1558655146-d09347e92766?w=400" },
            { name: "EVENTS & ENTERTAIN.", img: "https://images.unsplash.com/photo-1514525253344-a812ca99a8a4?w=400" },
            { name: "REAL ESTATE & PROP.", img: "https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400" },
            { name: "FINANCE & INSURANCE", img: "https://images.unsplash.com/photo-1550565118-3d1428df732f?w=400" },
            { name: "PUBLIC & COMMUNITY", img: "https://images.unsplash.com/photo-1577415124269-fc1140a69e91?w=400" },
            { name: "SECURITY & SAFETY", img: "https://images.unsplash.com/photo-1557597774-9d2739f85a94?w=400" },
            { name: "PERSONAL/FREELANCE", img: "https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=400" },
            { name: "AUTOMOTIVE/IND.", img: "https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=400" },
            { name: "SCIENCE & INNOV.", img: "https://images.unsplash.com/photo-1507413245164-6160d8298b31?w=400" },
            { name: "TALENT & EXPERTISE ⭐", img: "https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=400" }
        ];

        const grid = document.getElementById('grid');
        const header = document.getElementById('category-header');
        const gridScreen = document.getElementById('grid-screen');
        const drillScreen = document.getElementById('drilldown-screen');
        let isSubView = false, animInterval;

        function renderMainGrid() {
            isSubView = false; header.style.display = "none";
            gridScreen.style.display = 'flex'; drillScreen.style.display = 'none';
            grid.innerHTML = '';
            mainCats.forEach(c => {
                const box = createBox(c.name, c.img);
                box.onclick = () => showSub(c.name, c.img);
                grid.appendChild(box);
            });
            startAnimation();
        }

        function createBox(name, img) {
            const div = document.createElement('div'); div.className = 'service-box';
            div.innerHTML = `<img src="${img}"><span>${name}</span>`;
            return div;
        }

        function showSub(name, img) {
            isSubView = true; stopAnimation();
            document.getElementById('current-category-name').innerText = name;
            header.style.display = "flex";
            grid.innerHTML = '';
            subData[name].forEach(s => {
                const box = createBox(s, img);
                box.onclick = () => openDrillDown(name);
                grid.appendChild(box);
            });
        }

        function openDrillDown(catName) {
            gridScreen.style.display = 'none'; drillScreen.style.display = 'flex';
            header.style.display = 'none';
            const selector = document.getElementById('subSelector');
            selector.innerHTML = '';
            
            subData[catName].forEach(s => {
                const b = document.createElement('div');
                b.className = 'sub-box-item';
                b.innerText = s;
                b.dataset.name = s;
                selector.appendChild(b);
            });

            // Intersection Observer to detect when item enters B position
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        document.querySelectorAll('.sub-box-item').forEach(x => x.classList.remove('in-b-position'));
                        entry.target.classList.add('in-b-position');
                        updateCompanies(entry.target.dataset.name);
                    }
                });
            }, { root: selector, threshold: 0.7, rootMargin: "-45% 0px -45% 0px" });

            document.querySelectorAll('.sub-box-item').forEach(b => observer.observe(b));
        }

        function updateCompanies(name) {
            const cg = document.getElementB
